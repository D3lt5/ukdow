-- Nova Hub GUI Library v2
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Player = Players.LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")

local library = {}

-- ================= GUI Container =================
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "NovaHubGui"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = PlayerGui

-- ================= Splash Screen =================
local Splash = Instance.new("Frame")
Splash.Size = UDim2.new(0, 300, 0, 150)
Splash.Position = UDim2.new(0.5, 0, 0.5, 0)
Splash.AnchorPoint = Vector2.new(0.5, 0.5)
Splash.BackgroundColor3 = Color3.fromRGB(18, 18, 18)
Splash.BackgroundTransparency = 1
Splash.BorderSizePixel = 0
Splash.Parent = ScreenGui

local UICornerSplash = Instance.new("UICorner")
UICornerSplash.CornerRadius = UDim.new(0, 20)
UICornerSplash.Parent = Splash

local SplashText = Instance.new("TextLabel")
SplashText.Size = UDim2.new(1, 0, 1, 0)
SplashText.BackgroundTransparency = 1
SplashText.Text = "Nova Hub"
SplashText.TextColor3 = Color3.fromRGB(255, 255, 255)
SplashText.Font = Enum.Font.FredokaOne
SplashText.TextScaled = true
SplashText.Parent = Splash

-- Fade-in/out splash
TweenService:Create(Splash, TweenInfo.new(0.8), {BackgroundTransparency = 0}):Play()
wait(1.8)
TweenService:Create(Splash, TweenInfo.new(0.8), {BackgroundTransparency = 1}):Play()
wait(0.8)
Splash:Destroy()

-- ================= Main Frame =================
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 600, 0, 400)
MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
MainFrame.BackgroundColor3 = Color3.fromRGB(28,28,28)
MainFrame.BorderSizePixel = 0
MainFrame.Parent = ScreenGui
MainFrame.ClipsDescendants = true

local UICornerMain = Instance.new("UICorner")
UICornerMain.CornerRadius = UDim.new(0, 15)
UICornerMain.Parent = MainFrame

-- ================= Top Bar =================
local TopBar = Instance.new("Frame")
TopBar.Size = UDim2.new(1, 0, 0, 50)
TopBar.Position = UDim2.new(0, 0, 0, 0)
TopBar.BackgroundColor3 = Color3.fromRGB(35,35,35)
TopBar.Parent = MainFrame

local UICornerTop = Instance.new("UICorner")
UICornerTop.CornerRadius = UDim.new(0, 15)
UICornerTop.Parent = TopBar

local Title = Instance.new("TextLabel")
Title.Text = "Nova Hub"
Title.Size = UDim2.new(0.5, 0, 1, 0)
Title.Position = UDim2.new(0, 10, 0, 0)
Title.BackgroundTransparency = 1
Title.TextColor3 = Color3.fromRGB(240,240,240)
Title.Font = Enum.Font.FredokaOne
Title.TextScaled = true
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = TopBar

local CloseButton = Instance.new("TextButton")
CloseButton.Text = "X"
CloseButton.Size = UDim2.new(0, 40, 0, 40)
CloseButton.Position = UDim2.new(1, -50, 0, 5)
CloseButton.BackgroundColor3 = Color3.fromRGB(180, 50, 50)
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.Font = Enum.Font.FredokaOne
CloseButton.TextScaled = true
CloseButton.Parent = TopBar

local UICornerClose = Instance.new("UICorner")
UICornerClose.CornerRadius = UDim.new(0, 10)
UICornerClose.Parent = CloseButton

CloseButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)

-- ================= Vertical Tabs =================
library.Tabs = {}
local TabsContainer = Instance.new("Frame")
TabsContainer.Size = UDim2.new(0, 120, 1, -50)
TabsContainer.Position = UDim2.new(0, 0, 0, 50)
TabsContainer.BackgroundTransparency = 1
TabsContainer.Parent = MainFrame

local tabNames = {}
local tabButtons = {}
local ContentFrames = {}

function library:CreateTab(tabName)
    local index = #tabNames + 1
    tabNames[index] = tabName

    -- Button
    local btn = Instance.new("TextButton")
    btn.Text = tabName
    btn.Size = UDim2.new(0, 100, 0, 35)
    btn.Position = UDim2.new(0, 10, 0, 10 + (index-1)*(35+10))
    btn.BackgroundColor3 = Color3.fromRGB(50,50,50)
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.Font = Enum.Font.FredokaOne
    btn.TextScaled = true
    btn.Parent = TabsContainer

    local UICornerBtn = Instance.new("UICorner")
    UICornerBtn.CornerRadius = UDim.new(0,10)
    UICornerBtn.Parent = btn

    tabButtons[index] = btn

    -- Content Frame
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, -120, 1, -50)
    frame.Position = UDim2.new(0, 120, 0, 50)
    frame.BackgroundColor3 = Color3.fromRGB(38,38,38)
    frame.Visible = false
    frame.Parent = MainFrame

    local UICornerFrame = Instance.new("UICorner")
    UICornerFrame.CornerRadius = UDim.new(0,10)
    UICornerFrame.Parent = frame

    local scroll = Instance.new("ScrollingFrame")
    scroll.Size = UDim2.new(1, -20, 1, -20)
    scroll.Position = UDim2.new(0,10,0,10)
    scroll.BackgroundTransparency = 1
    scroll.ScrollBarThickness = 0
    scroll.Parent = frame

    ContentFrames[index] = {Frame = frame, Scroll = scroll}

    -- Button click
    btn.MouseButton1Click:Connect(function()
        for j, c in pairs(ContentFrames) do
            c.Frame.Visible = (j == index)
        end
    end)

    return {
        CreateButton = function(self, text, callback)
            local button = Instance.new("TextButton")
            button.Text = text
            button.Size = UDim2.new(1, -20, 0, 35)
            button.Position = UDim2.new(0,10,0,#scroll:GetChildren()*40)
            button.BackgroundColor3 = Color3.fromRGB(60,60,60)
            button.TextColor3 = Color3.fromRGB(255,255,255)
            button.Font = Enum.Font.FredokaOne
            button.TextScaled = true
            button.Parent = scroll

            local corner = Instance.new("UICorner")
            corner.CornerRadius = UDim.new(0,10)
            corner.Parent = button

            button.MouseButton1Click:Connect(callback)
            return button
        end,
        CreateDivider = function(self, text)
            local label = Instance.new("TextLabel")
            label.Size = UDim2.new(1, -20, 0, 25)
            label.Position = UDim2.new(0,10,0,#scroll:GetChildren()*30)
            label.BackgroundTransparency = 1
            label.Text = text
            label.TextColor3 = Color3.fromRGB(200,200,200)
            label.Font = Enum.Font.FredokaOne
            label.TextScaled = true
            label.Parent = scroll
            return label
        end,
        CreateTextbox = function(self, placeholder, callback)
            local box = Instance.new("TextBox")
            box.Size = UDim2.new(1,-20,0,35)
            box.Position = UDim2.new(0,10,0,#scroll:GetChildren()*40)
            box.PlaceholderText = placeholder
            box.BackgroundColor3 = Color3.fromRGB(60,60,60)
            box.TextColor3 = Color3.fromRGB(255,255,255)
            box.Font = Enum.Font.FredokaOne
            box.TextScaled = true
            box.Parent = scroll

            local corner = Instance.new("UICorner")
            corner.CornerRadius = UDim.new(0,10)
            corner.Parent = box

            box.FocusLost:Connect(function()
                callback(box.Text)
            end)
            return box
        end
    }
end

-- ================= Drag con effetto smooth =================
local velocity = Vector2.new(0,0)
local lastPos = MainFrame.Position

local dragging = false
local dragInput
local dragStart
local startPos

local function update(input)
    local delta = input.Position - dragStart
    local newPos = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    velocity = (newPos.Position - MainFrame.Position.Position) * 15
    MainFrame.Position = newPos
end

MainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = MainFrame.Position

        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

MainFrame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        update(input)
    end
end)

-- Smooth inertia
RunService.RenderStepped:Connect(function(delta)
    if not dragging then
        local pos = MainFrame.Position.Position + velocity * delta
        MainFrame.Position = UDim2.new(MainFrame.Position.X.Scale, pos.X, MainFrame.Position.Y.Scale, pos.Y)
        velocity = velocity * (0.85) -- damping
    end
end)

return library
